# 142.环形链表2

https://leetcode.cn/problems/linked-list-cycle-ii/?envType=study-plan-v2&envId=top-100-liked

判断链表是否有环，有的话返回环的入口

```java
public class Solution {
    public ListNode detectCycle(ListNode head) {
        ListNode slow = head;
        ListNode fast = head;
        while(fast!=null&&fast.next!=null){
            slow=slow.next;
            fast=fast.next.next;
            if(slow==fast){
                ListNode p = head;
                while(p!=slow){
                    p=p.next;
                    slow=slow.next;
                }
                return p;
            }
        }
        return null;
    }
}
```

<img src="/Users/luofan/note/leetcode/image/circle.png" alt="circle" style="zoom:25%;" />

1.如图所示，紫色为快慢指针的相交点，相交时慢指针走过a+n(b+c)+b,快指针走过a+(n+r)(b+c)+b，其中r代表了快指针比慢指针多走的圈数。快指针走两步慢指针走一步，因此2(a+n(b+c)+b)=a+(n+r)(b+c)+b,可以得出a=(r-n-1)(b+c)+c，其中b+c是一圈的环长，因此slow指针走过r-n-1圈再加上一个c会刚好和从head出发的另一个一次走一步的指针在环的入口相遇

